"use strict";(self.webpackChunkcompass=self.webpackChunkcompass||[]).push([[329],{3905:function(e,a,t){t.d(a,{Zo:function(){return d},kt:function(){return m}});var n=t(7294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function s(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?s(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var i=n.createContext({}),u=function(e){var a=n.useContext(i),t=a;return e&&(t="function"==typeof e?e(a):o(o({},a),e)),t},d=function(e){var a=u(e.components);return n.createElement(i.Provider,{value:a},e.children)},p={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},c=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,s=e.originalType,i=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=u(t),m=r,h=c["".concat(i,".").concat(m)]||c[m]||p[m]||s;return t?n.createElement(h,o(o({ref:a},d),{},{components:t})):n.createElement(h,o({ref:a},d))}));function m(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var s=t.length,o=new Array(s);o[0]=c;var l={};for(var i in a)hasOwnProperty.call(a,i)&&(l[i]=a[i]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var u=2;u<s;u++)o[u]=t[u];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}c.displayName="MDXCreateElement"},5162:function(e,a,t){t.d(a,{Z:function(){return o}});var n=t(7294),r=t(6010),s="tabItem_Ymn6";function o(e){var a=e.children,t=e.hidden,o=e.className;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(s,o),hidden:t},a)}},5488:function(e,a,t){t.d(a,{Z:function(){return m}});var n=t(7462),r=t(7294),s=t(6010),o=t(2389),l=t(7392),i=t(7094),u=t(2466),d="tabList__CuJ",p="tabItem_LNqP";function c(e){var a,t,o=e.lazy,c=e.block,m=e.defaultValue,h=e.values,b=e.groupId,f=e.className,g=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),y=null!=h?h:g.map((function(e){var a=e.props;return{value:a.value,label:a.label,attributes:a.attributes}})),v=(0,l.l)(y,(function(e,a){return e.value===a.value}));if(v.length>0)throw new Error('Docusaurus error: Duplicate values "'+v.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var k=null===m?m:null!=(a=null!=m?m:null==(t=g.find((function(e){return e.props.default})))?void 0:t.props.value)?a:g[0].props.value;if(null!==k&&!y.some((function(e){return e.value===k})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+k+'" but none of its children has the corresponding value. Available values are: '+y.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var w=(0,i.U)(),T=w.tabGroupChoices,N=w.setTabGroupChoices,C=(0,r.useState)(k),O=C[0],x=C[1],j=[],I=(0,u.o5)().blockElementScrollPositionUntilNextRender;if(null!=b){var E=T[b];null!=E&&E!==O&&y.some((function(e){return e.value===E}))&&x(E)}var D=function(e){var a=e.currentTarget,t=j.indexOf(a),n=y[t].value;n!==O&&(I(a),x(n),null!=b&&N(b,String(n)))},Z=function(e){var a,t=null;switch(e.key){case"ArrowRight":var n,r=j.indexOf(e.currentTarget)+1;t=null!=(n=j[r])?n:j[0];break;case"ArrowLeft":var s,o=j.indexOf(e.currentTarget)-1;t=null!=(s=j[o])?s:j[j.length-1]}null==(a=t)||a.focus()};return r.createElement("div",{className:(0,s.Z)("tabs-container",d)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":c},f)},y.map((function(e){var a=e.value,t=e.label,o=e.attributes;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:O===a?0:-1,"aria-selected":O===a,key:a,ref:function(e){return j.push(e)},onKeyDown:Z,onFocus:D,onClick:D},o,{className:(0,s.Z)("tabs__item",p,null==o?void 0:o.className,{"tabs__item--active":O===a})}),null!=t?t:a)}))),o?(0,r.cloneElement)(g.filter((function(e){return e.props.value===O}))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},g.map((function(e,a){return(0,r.cloneElement)(e,{key:a,hidden:e.props.value!==O})}))))}function m(e){var a=(0,o.Z)();return r.createElement(c,(0,n.Z)({key:String(a)},e))}},4958:function(e,a,t){t.r(a),t.d(a,{assets:function(){return c},contentTitle:function(){return d},default:function(){return b},frontMatter:function(){return u},metadata:function(){return p},toc:function(){return m}});var n=t(7462),r=t(3366),s=(t(7294),t(3905)),o=t(5488),l=t(5162),i=["components"],u={},d="3. Asset Lineage",p={unversionedId:"tour/asset-lineage",id:"tour/asset-lineage",title:"3. Asset Lineage",description:"3.1 Inserting lineage",source:"@site/docs/tour/3-asset-lineage.mdx",sourceDirName:"tour",slug:"/tour/asset-lineage",permalink:"/compass/tour/asset-lineage",draft:!1,editUrl:"https://github.com/odpf/compass/edit/master/docs/docs/tour/3-asset-lineage.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{},sidebar:"docsSidebar",previous:{title:"2. Querying your Assets",permalink:"/compass/tour/querying-assets"},next:{title:"Ingesting metadata",permalink:"/compass/guides/ingestion"}},c={},m=[{value:"3.1 Inserting lineage",id:"31-inserting-lineage",level:2},{value:"Querying Lineage",id:"querying-lineage",level:2},{value:"Conclusion",id:"conclusion",level:2}],h={toc:m};function b(e){var a=e.components,t=(0,r.Z)(e,i);return(0,s.kt)("wrapper",(0,n.Z)({},h,t,{components:a,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"3-asset-lineage"},"3. Asset Lineage"),(0,s.kt)("h2",{id:"31-inserting-lineage"},"3.1 Inserting lineage"),(0,s.kt)("p",null,"To have a lineage, we need at least two assets to be linked with each other.\nCompass only needs one of the assets to define the lineage."),(0,s.kt)("p",null,"Let's create a new dashboard asset (tableau) that uses data from the ",(0,s.kt)("inlineCode",{parentName:"p"},"main-postgres:my-database.orders")," table asset that we created earlier in ",(0,s.kt)("a",{parentName:"p",href:"/compass/tour/my-first-asset#13-sending-your-first-asset-to-compass"},"first section"),".\nAnd while creating the asset, we can also define its lineage in the same request."),(0,s.kt)(o.Z,{groupId:"api",mdxType:"Tabs"},(0,s.kt)(l.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"$ compass asset edit --body=<path to the asset.json file>\n")),(0,s.kt)("p",null,"Example asset.json configuration for creating the ",(0,s.kt)("inlineCode",{parentName:"p"},"upstream")," lineage (denoting the source of the asset data)"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "asset": {\n        "urn": "tableau:my-dashboard.daily-orders",\n        "type": "dashboard",\n        "service": "tableau",\n        "name": "Daily Orders Dashboard",\n        "description": "This is a dashboard showing daily orders"\n    },\n    "upstreams": [\n        {\n            "urn": "main-postgres:my-database.orders"\n        }\n    ]\n}\n'))),(0,s.kt)(l.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},'curl --location --request PATCH \'http://localhost:8080/v1beta1/assets\' \\\n--header \'Content-Type: application/json\' \\\n--header \'Compass-User-UUID: john.doe@example.com\' \\\n--data-raw \'{\n    "asset": {\n        "urn": "tableau:my-dashboard.daily-orders",\n        "type": "dashboard",\n        "service": "tableau",\n        "name": "Daily Orders Dashboard",\n        "description": "This is a dashboard showing daily orders"\n    },\n    "upstreams": [\n        {\n            "urn": "main-postgres:my-database.orders"\n        }\n    ]\n}\'\n')))),(0,s.kt)("p",null,"We use ",(0,s.kt)("inlineCode",{parentName:"p"},"upstreams")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"downstreams")," field to define lineage.\nFrom the example above ",(0,s.kt)("inlineCode",{parentName:"p"},"main-postgres:my-database.orders")," is the source of the dashboard, so we put it inside ",(0,s.kt)("inlineCode",{parentName:"p"},"upstreams")," field."),(0,s.kt)("p",null,"And just like that we created a lineage :)"),(0,s.kt)("h2",{id:"querying-lineage"},"Querying Lineage"),(0,s.kt)("p",null,"Once lineage is defined, we can easily fetch them using a single asset URN to be the center of the lineage like below"),(0,s.kt)(o.Z,{groupId:"api",mdxType:"Tabs"},(0,s.kt)(l.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"$ compass lineage tableau:my-dashboard.daily-orders\n"))),(0,s.kt)(l.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"curl 'http://localhost:8080/v1beta1/lineage/tableau:my-dashboard.daily-orders' \\\n--header 'Compass-User-UUID: john.doe@example.com'\n")))),(0,s.kt)("p",null,"And you will get this as the response"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "data": [\n        {\n            "source": "main-postgres:my-database.orders",\n            "target": "tableau:my-dashboard.daily-orders",\n            "prop": {\n                "root": "tableau:my-dashboard.daily-orders"\n            }\n        }\n    ]\n}\n')),(0,s.kt)("p",null,"You can also get the lineage using the URN ",(0,s.kt)("inlineCode",{parentName:"p"},"main-postgres:my-database.orders"),", even when you have only defined ",(0,s.kt)("inlineCode",{parentName:"p"},"upstreams")," on ",(0,s.kt)("inlineCode",{parentName:"p"},"tableau:my-dashboard.daily-orders"),"."),(0,s.kt)(o.Z,{groupId:"api",mdxType:"Tabs"},(0,s.kt)(l.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"$ compass lineage main-postgres:my-database.orders\n"))),(0,s.kt)(l.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"curl 'http://localhost:8080/v1beta1/lineage/main-postgres:my-database.orders' \\\n--header 'Compass-User-UUID: john.doe@example.com'\n")))),(0,s.kt)("h2",{id:"conclusion"},"Conclusion"),(0,s.kt)("p",null,"This is merely a simple example of how Compass can help you manage and build your Data Lineage.\nYou just need to dump all of your assets along with its ",(0,s.kt)("inlineCode",{parentName:"p"},"upstreams")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"downstreams")," as shown above and Compass will take care of the rest."),(0,s.kt)("p",null,"And that's it, we have just covered all the basics of Compass and how you can use it to manage and maintain your metadata.\nAside from features introduced in this tour, Compass also has additional features such as Asset starring and discussion, you can check those in the ",(0,s.kt)("a",{parentName:"p",href:"../guides/starring"},"Guides section"),"."))}b.isMDXComponent=!0}}]);