"use strict";(self.webpackChunkcompass=self.webpackChunkcompass||[]).push([[19],{3905:function(e,n,s){s.d(n,{Zo:function(){return c},kt:function(){return m}});var t=s(7294);function a(e,n,s){return n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}function i(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),s.push.apply(s,t)}return s}function o(e){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?i(Object(s),!0).forEach((function(n){a(e,n,s[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))}))}return e}function r(e,n){if(null==e)return{};var s,t,a=function(e,n){if(null==e)return{};var s,t,a={},i=Object.keys(e);for(t=0;t<i.length;t++)s=i[t],n.indexOf(s)>=0||(a[s]=e[s]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)s=i[t],n.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var l=t.createContext({}),u=function(e){var n=t.useContext(l),s=n;return e&&(s="function"==typeof e?e(n):o(o({},n),e)),s},c=function(e){var n=u(e.components);return t.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},p=t.forwardRef((function(e,n){var s=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),p=u(s),m=a,h=p["".concat(l,".").concat(m)]||p[m]||d[m]||i;return s?t.createElement(h,o(o({ref:n},c),{},{components:s})):t.createElement(h,o({ref:n},c))}));function m(e,n){var s=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=s.length,o=new Array(i);o[0]=p;var r={};for(var l in n)hasOwnProperty.call(n,l)&&(r[l]=n[l]);r.originalType=e,r.mdxType="string"==typeof e?e:a,o[1]=r;for(var u=2;u<i;u++)o[u]=s[u];return t.createElement.apply(null,o)}return t.createElement.apply(null,s)}p.displayName="MDXCreateElement"},5162:function(e,n,s){s.d(n,{Z:function(){return o}});var t=s(7294),a=s(6010),i="tabItem_Ymn6";function o(e){var n=e.children,s=e.hidden,o=e.className;return t.createElement("div",{role:"tabpanel",className:(0,a.Z)(i,o),hidden:s},n)}},5488:function(e,n,s){s.d(n,{Z:function(){return m}});var t=s(7462),a=s(7294),i=s(6010),o=s(2389),r=s(7392),l=s(7094),u=s(2466),c="tabList__CuJ",d="tabItem_LNqP";function p(e){var n,s,o=e.lazy,p=e.block,m=e.defaultValue,h=e.values,f=e.groupId,b=e.className,v=a.Children.map(e.children,(function(e){if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),g=null!=h?h:v.map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes}})),y=(0,r.l)(g,(function(e,n){return e.value===n.value}));if(y.length>0)throw new Error('Docusaurus error: Duplicate values "'+y.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var w=null===m?m:null!=(n=null!=m?m:null==(s=v.find((function(e){return e.props.default})))?void 0:s.props.value)?n:v[0].props.value;if(null!==w&&!g.some((function(e){return e.value===w})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+w+'" but none of its children has the corresponding value. Available values are: '+g.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var k=(0,l.U)(),T=k.tabGroupChoices,C=k.setTabGroupChoices,N=(0,a.useState)(w),D=N[0],I=N[1],O=[],P=(0,u.o5)().blockElementScrollPositionUntilNextRender;if(null!=f){var U=T[f];null!=U&&U!==D&&g.some((function(e){return e.value===U}))&&I(U)}var x=function(e){var n=e.currentTarget,s=O.indexOf(n),t=g[s].value;t!==D&&(P(n),I(t),null!=f&&C(f,String(t)))},E=function(e){var n,s=null;switch(e.key){case"ArrowRight":var t,a=O.indexOf(e.currentTarget)+1;s=null!=(t=O[a])?t:O[0];break;case"ArrowLeft":var i,o=O.indexOf(e.currentTarget)-1;s=null!=(i=O[o])?i:O[O.length-1]}null==(n=s)||n.focus()};return a.createElement("div",{className:(0,i.Z)("tabs-container",c)},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":p},b)},g.map((function(e){var n=e.value,s=e.label,o=e.attributes;return a.createElement("li",(0,t.Z)({role:"tab",tabIndex:D===n?0:-1,"aria-selected":D===n,key:n,ref:function(e){return O.push(e)},onKeyDown:E,onFocus:x,onClick:x},o,{className:(0,i.Z)("tabs__item",d,null==o?void 0:o.className,{"tabs__item--active":D===n})}),null!=s?s:n)}))),o?(0,a.cloneElement)(v.filter((function(e){return e.props.value===D}))[0],{className:"margin-top--md"}):a.createElement("div",{className:"margin-top--md"},v.map((function(e,n){return(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==D})}))))}function m(e){var n=(0,o.Z)();return a.createElement(p,(0,t.Z)({key:String(n)},e))}},6936:function(e,n,s){s.r(n),s.d(n,{assets:function(){return p},contentTitle:function(){return c},default:function(){return f},frontMatter:function(){return u},metadata:function(){return d},toc:function(){return m}});var t=s(7462),a=s(3366),i=(s(7294),s(3905)),o=s(5488),r=s(5162),l=["components"],u={},c="Discussion",d={unversionedId:"guides/discussion",id:"guides/discussion",title:"Discussion",description:"Discussion is a new feature in Compass. One could create a discussion and all users can put comment in it. Currently, there are three types of discussions issues, open ended, and question and answer. Depending on the type, the discussion could have multiple possible states. In the current version, all types only have two states: open and closed. A newly created discussion will always be assign an open state.",source:"@site/docs/guides/discussion.md",sourceDirName:"guides",slug:"/guides/discussion",permalink:"/compass/guides/discussion",draft:!1,editUrl:"https://github.com/odpf/compass/edit/master/docs/docs/guides/discussion.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Tagging",permalink:"/compass/guides/tagging"},next:{title:"Overview",permalink:"/compass/concepts/overview"}},p={},m=[{value:"Create a Discussion",id:"create-a-discussion",level:2},{value:"Fetching All Discussions",id:"fetching-all-discussions",level:2},{value:"Patching Discussion",id:"patching-discussion",level:2},{value:"Commenting a Discussion",id:"commenting-a-discussion",level:2},{value:"Getting All My Discussions",id:"getting-all-my-discussions",level:2}],h={toc:m};function f(e){var n=e.components,s=(0,a.Z)(e,l);return(0,i.kt)("wrapper",(0,t.Z)({},h,s,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"discussion"},"Discussion"),(0,i.kt)("p",null,"Discussion is a new feature in Compass. One could create a discussion and all users can put comment in it. Currently, there are three types of discussions ",(0,i.kt)("inlineCode",{parentName:"p"},"issues"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"open ended"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"question and answer"),". Depending on the type, the discussion could have multiple possible states. In the current version, all types only have two states: ",(0,i.kt)("inlineCode",{parentName:"p"},"open")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"closed"),". A newly created discussion will always be assign an ",(0,i.kt)("inlineCode",{parentName:"p"},"open")," state."),(0,i.kt)("h2",{id:"create-a-discussion"},"Create a Discussion"),(0,i.kt)("p",null,"A discussion thread can be created with the Discussion API. The API contract is available ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/odpf/compass/blob/main/third_party/OpenAPI/compass.swagger.json"},"here"),"."),(0,i.kt)(o.Z,{groupId:"cli",mdxType:"Tabs"},(0,i.kt)(r.Z,{value:"CLI",label:"CLI",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ compass discussion post --body=<filepath to discussion body>\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "title": "The first discussion",\n  "body": "This is the first discussion thread in Compass",\n  "type": "openended"\n}\n'))),(0,i.kt)(r.Z,{value:"HTTP",label:"HTTP",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl --request POST \'http://localhost:8080/v1beta1/discussions\' \\\n--header \'Compass-User-UUID:odpf@email.com\' \\\n--data-raw \'{\n  "title": "The first discussion",\n  "body": "This is the first discussion thread in Compass",\n  "type": "openended"\n}\'\n')))),(0,i.kt)("h2",{id:"fetching-all-discussions"},"Fetching All Discussions"),(0,i.kt)("p",null,"The Get Discussions will fetch all discussions in Compass."),(0,i.kt)(o.Z,{groupId:"cli",mdxType:"Tabs"},(0,i.kt)(r.Z,{value:"CLI",label:"CLI",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ compass discussion list\n"))),(0,i.kt)(r.Z,{value:"HTTP",label:"HTTP",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ curl 'http://localhost:8080/v1beta1/discussions' \\\n--header 'Compass-User-UUID:odpf@email.com'\n")))),(0,i.kt)("p",null,"The response will be something like"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'{\n    "data": [\n        {\n            "id": "1",\n            "title": "The first discussion",\n            "body": "This is the first discussion thread in Compass",\n            "type": "openended"\n            "state": "open",\n            "labels": [],\n            "assets": [],\n            "assignees": [],\n            "owner": {\n                "id": "dd9e2e07-a13f-1c2b-07e3-e32cf0f7688c",\n                "email": "odpf@email.com",\n                "provider": "shield"\n            },\n            "created_at": "elit cillum Duis",\n            "updated_at": "velit dolor ex"\n        }\n    ]\n}\n')),(0,i.kt)("p",null,"Notice the state is ",(0,i.kt)("inlineCode",{parentName:"p"},"open")," by default once we create a new discussion. There are also some additional features in discussion where we can label the discussion and assign users and assets to the discussion. These labelling and assinging assets and users could also be done when we are creating a discussion."),(0,i.kt)("h2",{id:"patching-discussion"},"Patching Discussion"),(0,i.kt)("p",null,"If we are not labelling and assigning users & assets to the discussion in the creation step, there are also a dedicated API to do those."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl --request PATCH \'http://localhost:8080/v1beta1/discussions/1\' \\\n--header \'Compass-User-UUID:odpf@email.com\' \\\n--data-raw \'{\n    "title": "The first discussion (duplicated)",\n    "state": "closed"\n}\'\n')),(0,i.kt)("p",null,"We just need to send the fields that we want to patch for a discussion. Some fields have array type, in this case the PATCH will overwrite the fields with the new value."),(0,i.kt)("p",null,"For example we have this labelled discussion."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl \'http://localhost:8080/v1beta1/discussions\' \\\n--header \'Compass-User-UUID:odpf@email.com\'\n\n{\n    "data": [\n        {\n            "id": "1",\n            "title": "The first discussion",\n            "body": "This is the first discussion thread in Compass",\n            "type": "openended"\n            "state": "open",\n            "labels": [\n                "work",\n                "urgent",\n                "help wanted"\n            ],\n            "owner": {\n                "id": "dd9e2e07-a13f-1c2b-07e3-e32cf0f7688c",\n                "email": "odpf@email.com",\n                "provider": "shield"\n            },\n            "created_at": "elit cillum Duis",\n            "updated_at": "velit dolor ex"\n        }\n    ]\n}\n')),(0,i.kt)("p",null,"If we patch the label with the new values."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ curl --request PATCH 'http://localhost:8080/v1beta1/discussions/1' \\\n--header 'Compass-User-UUID:odpf@email.com' \\\n--data-raw '{\n    \"labels\": [\"new value\"]\n}'\n")),(0,i.kt)("p",null,"The discussion with id 1 will be updated like this."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl \'http://localhost:8080/v1beta1/discussions\' \\\n--header \'Compass-User-UUID:odpf@email.com\'\n\n{\n    "data": [\n        {\n            "id": "1",\n            "title": "The first discussion",\n            "body": "This is the first discussion thread in Compass",\n            "type": "openended"\n            "state": "open",\n            "labels": [\n                "new value"\n            ],\n            "owner": {\n                "id": "dd9e2e07-a13f-1c2b-07e3-e32cf0f7688c",\n                "email": "odpf@email.com",\n                "provider": "shield"\n            },\n            "created_at": "elit cillum Duis",\n            "updated_at": "velit dolor ex"\n        }\n    ]\n}\n')),(0,i.kt)("h2",{id:"commenting-a-discussion"},"Commenting a Discussion"),(0,i.kt)("p",null,"One could also comment a specific discussion with discussion comment API."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ curl --request POST 'http://localhost:8080/v1beta1/discussions/1/comments' \\\n--header 'Compass-User-UUID:odpf@email.com' \\\n--data-raw '{\n  \"body\": \"This is the first comment of discussion 1\"\n}'\n")),(0,i.kt)("h2",{id:"getting-all-my-discussions"},"Getting All My Discussions"),(0,i.kt)("p",null,"Compass integrates discussions with User API so we could fetch all discussions belong to us with this API."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl \'http://localhost:8080/v1beta1/me/discussions\' \\\n--header \'Compass-User-UUID:odpf@email.com\'\n\n{\n    "data": [\n        {\n            "id": "1",\n            "title": "The first discussion",\n            "body": "This is the first discussion thread in Compass",\n            "type": "openended"\n            "state": "open",\n            "labels": [\n                "new value"\n            ],\n            "owner": {\n                "id": "dd9e2e07-a13f-1c2b-07e3-e32cf0f7688c",\n                "email": "odpf@email.com",\n                "provider": "shield"\n            },\n            "created_at": "elit cillum Duis",\n            "updated_at": "velit dolor ex"\n        }\n    ]\n}\n')))}f.isMDXComponent=!0}}]);