"use strict";(self.webpackChunkcompass=self.webpackChunkcompass||[]).push([[244],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return m}});var a=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var i=a.createContext({}),p=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=p(e.components);return a.createElement(i.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(t),m=o,h=u["".concat(i,".").concat(m)]||u[m]||d[m]||r;return t?a.createElement(h,l(l({ref:n},c),{},{components:t})):a.createElement(h,l({ref:n},c))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=t.length,l=new Array(r);l[0]=u;var s={};for(var i in n)hasOwnProperty.call(n,i)&&(s[i]=n[i]);s.originalType=e,s.mdxType="string"==typeof e?e:o,l[1]=s;for(var p=2;p<r;p++)l[p]=t[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},5162:function(e,n,t){t.d(n,{Z:function(){return l}});var a=t(7294),o=t(6010),r="tabItem_Ymn6";function l(e){var n=e.children,t=e.hidden,l=e.className;return a.createElement("div",{role:"tabpanel",className:(0,o.Z)(r,l),hidden:t},n)}},5488:function(e,n,t){t.d(n,{Z:function(){return m}});var a=t(7462),o=t(7294),r=t(6010),l=t(2389),s=t(7392),i=t(7094),p=t(2466),c="tabList__CuJ",d="tabItem_LNqP";function u(e){var n,t,l=e.lazy,u=e.block,m=e.defaultValue,h=e.values,g=e.groupId,f=e.className,y=o.Children.map(e.children,(function(e){if((0,o.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),k=null!=h?h:y.map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes}})),b=(0,s.l)(k,(function(e,n){return e.value===n.value}));if(b.length>0)throw new Error('Docusaurus error: Duplicate values "'+b.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var v=null===m?m:null!=(n=null!=m?m:null==(t=y.find((function(e){return e.props.default})))?void 0:t.props.value)?n:y[0].props.value;if(null!==v&&!k.some((function(e){return e.value===v})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+v+'" but none of its children has the corresponding value. Available values are: '+k.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var w=(0,i.U)(),N=w.tabGroupChoices,T=w.setTabGroupChoices,C=(0,o.useState)(v),I=C[0],P=C[1],x=[],U=(0,p.o5)().blockElementScrollPositionUntilNextRender;if(null!=g){var q=N[g];null!=q&&q!==I&&k.some((function(e){return e.value===q}))&&P(q)}var A=function(e){var n=e.currentTarget,t=x.indexOf(n),a=k[t].value;a!==I&&(U(n),P(a),null!=g&&T(g,String(a)))},Z=function(e){var n,t=null;switch(e.key){case"ArrowRight":var a,o=x.indexOf(e.currentTarget)+1;t=null!=(a=x[o])?a:x[0];break;case"ArrowLeft":var r,l=x.indexOf(e.currentTarget)-1;t=null!=(r=x[l])?r:x[x.length-1]}null==(n=t)||n.focus()};return o.createElement("div",{className:(0,r.Z)("tabs-container",c)},o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":u},f)},k.map((function(e){var n=e.value,t=e.label,l=e.attributes;return o.createElement("li",(0,a.Z)({role:"tab",tabIndex:I===n?0:-1,"aria-selected":I===n,key:n,ref:function(e){return x.push(e)},onKeyDown:Z,onFocus:A,onClick:A},l,{className:(0,r.Z)("tabs__item",d,null==l?void 0:l.className,{"tabs__item--active":I===n})}),null!=t?t:n)}))),l?(0,o.cloneElement)(y.filter((function(e){return e.props.value===I}))[0],{className:"margin-top--md"}):o.createElement("div",{className:"margin-top--md"},y.map((function(e,n){return(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==I})}))))}function m(e){var n=(0,l.Z)();return o.createElement(u,(0,a.Z)({key:String(n)},e))}},4067:function(e,n,t){t.r(n),t.d(n,{assets:function(){return u},contentTitle:function(){return c},default:function(){return g},frontMatter:function(){return p},metadata:function(){return d},toc:function(){return m}});var a=t(7462),o=t(3366),r=(t(7294),t(3905)),l=t(5488),s=t(5162),i=["components"],p={},c="Ingesting metadata",d={unversionedId:"guides/ingestion",id:"guides/ingestion",title:"Ingesting metadata",description:"This document showcases compass usage, from producing data, to using APIs for specific use-cases. This guide is geared towards adminstrators, more than users. It is meant to give the administrators an introduction of different configuration options available, and how they affect the behaviour of the application.",source:"@site/docs/guides/ingestion.md",sourceDirName:"guides",slug:"/guides/ingestion",permalink:"/compass/guides/ingestion",draft:!1,editUrl:"https://github.com/odpf/compass/edit/master/docs/docs/guides/ingestion.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"3. Asset Lineage",permalink:"/compass/tour/asset-lineage"},next:{title:"Querying  metadata",permalink:"/compass/guides/querying"}},u={},m=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Adding Data",id:"adding-data",level:2},{value:"Searching",id:"searching",level:2},{value:"We can search for required text in the following ways:",id:"we-can-search-for-required-text-in-the-following-ways",level:4},{value:"We can search with custom queries in the following ways:",id:"we-can-search-with-custom-queries-in-the-following-ways",level:4},{value:"Lineage",id:"lineage",level:2},{value:"Adding <code>picollo</code> Metadata",id:"adding-picollo-metadata",level:3},{value:"Adding <code>sensu</code> Metadata",id:"adding-sensu-metadata",level:3},{value:"Querying Lineage",id:"querying-lineage",level:3},{value:"We can search for lineage in the following ways:",id:"we-can-search-for-lineage-in-the-following-ways",level:4}],h={toc:m};function g(e){var n=e.components,t=(0,o.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},h,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"ingesting-metadata"},"Ingesting metadata"),(0,r.kt)("p",null,"This document showcases compass usage, from producing data, to using APIs for specific use-cases. This guide is geared towards adminstrators, more than users. It is meant to give the administrators an introduction of different configuration options available, and how they affect the behaviour of the application."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This guide assumes that you have a local instance of compass running and listening on ",(0,r.kt)("inlineCode",{parentName:"p"},"localhost:8080"),". See ",(0,r.kt)("a",{parentName:"p",href:"/compass/installation"},"Installation")," guide for information on how to run Compass."),(0,r.kt)("h2",{id:"adding-data"},"Adding Data"),(0,r.kt)("p",null,"Let\u2019s say that you have a hypothetical tool called Piccolo and you have several deployments of this tool on your platform. Before we can push data for Piccolo deployments to Compass, you need to recognize the type of Piccolo, whether it is a kind of ",(0,r.kt)("inlineCode",{parentName:"p"},"table"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"topic"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"dashboard"),", or ",(0,r.kt)("inlineCode",{parentName:"p"},"job"),". One can ingest metadata to compass with the Upsert Patch API. The API contract is available ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/odpf/compass/blob/main/third_party/OpenAPI/compass.swagger.json"},"here"),"."),(0,r.kt)("p",null,"If there is an existing asset, Upsert Patch API will check each field whether there is an update in the field of the existing asset. With this behaviour, it is possible to send partial updated field to update a certain field only as long as the ",(0,r.kt)("inlineCode",{parentName:"p"},"urn"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"type"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"service")," match with the existing asset. If there is any field changed, a new version of the asset will be created. If the asset does not exist, upsert patch API will create a new asset. Apart from asset details, we also could send upstreams and downstreams of lineage edges of the asset in the body."),(0,r.kt)("p",null,"Let's say ",(0,r.kt)("inlineCode",{parentName:"p"},"piccolo")," tool is a kind of ",(0,r.kt)("inlineCode",{parentName:"p"},"table"),", we can start pushing data for it. Let's add 3 metadata of ",(0,r.kt)("inlineCode",{parentName:"p"},"picollo"),"."),(0,r.kt)(l.Z,{mdxType:"Tabs"},(0,r.kt)(s.Z,{value:"",label:"Picollo 1",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl --request PATCH \'http://localhost:8080/v1beta1/assets\' \\\n--header \'Compass-User-UUID:odpf@email.com\' \\\n--data-raw \'{\n    "asset": {\n        "urn": "picollo:deployment-01",\n        "type": "table",\n        "name": "deployment-01",\n        "service": "picollo",\n        "description": "this is the one",\n        "data": {},\n        "owners": [\n            {\n                "email": "john.doe@email.com"\n            }\n        ]\n    }\n}\'\n'))),(0,r.kt)(s.Z,{value:"picollo 2",label:"Picollo 2",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl --request PATCH \'http://localhost:8080/v1beta1/assets\' \\\n--header \'Compass-User-UUID:odpf@email.com\' \\\n--data-raw \'{\n    "asset": {\n        "urn": "picollo:deployment-02",\n        "type": "table",\n        "name": "deployment-02",\n        "service": "picollo",\n        "description": "this came second",\n        "data": {},\n        "owners": [\n            {\n                "email": "kami@email.com"\n            }\n        ]\n    }\n}\'\n'))),(0,r.kt)(s.Z,{value:"picollo 3",label:"Picollo 3",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl --request PATCH \'http://localhost:8080/v1beta1/assets\' \\\n--header \'Compass-User-UUID:odpf@email.com\' \\\n--data-raw \'{\n    "asset": {\n        "urn": "picollo:deployment-03",\n        "type": "table",\n        "name": "deployment-03",\n        "service": "picollo",\n        "description": "the last one",\n        "data": {},\n        "owners": [\n            {\n                "email": "kami@email.com"\n            }\n        ]\n    }\n}\'\n')))),(0,r.kt)("h2",{id:"searching"},"Searching"),(0,r.kt)("h4",{id:"we-can-search-for-required-text-in-the-following-ways"},"We can search for required text in the following ways:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Using ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"compass search <text>"))," CLI command"),(0,r.kt)("li",{parentName:"ol"},"Calling to ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"GET /v1beta1/search"))," API with ",(0,r.kt)("inlineCode",{parentName:"li"},"text")," to be searched as query parameter")),(0,r.kt)("p",null,"Now we're ready to start searching. Let's run a search for the term ",(0,r.kt)("strong",{parentName:"p"},"'one'")," from the assets we ingested earlier."),(0,r.kt)(l.Z,{groupId:"cli",mdxType:"Tabs"},(0,r.kt)(s.Z,{value:"CLI",label:"CLI",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ compass search one\n"))),(0,r.kt)(s.Z,{value:"HTTP",label:"HTTP",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ curl 'http://localhost:8080/v1beta1/search?text\\=one' \\\n--header 'Compass-User-UUID:odpf@email.com'  | jq\n")))),(0,r.kt)("p",null,"The output is the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "data": [\n         {\n            "urn": "picollo:deployment-01",\n            "type": "table",\n            "name": "deployment-01",\n            "service": "picollo",\n            "description": "this is the one",\n            "data": {},\n            "owners": [\n                {\n                    "email": "john.doe@email.com"\n                }\n            ],\n            "labels": {}\n        },\n        {\n            "urn": "picollo:deployment-03",\n            "type": "table",\n            "name": "deployment-03",\n            "service": "picollo",\n            "description": "the last one",\n            "data": {},\n            "owners": [\n                {\n                    "email": "kami@email.com"\n                }\n            ],\n            "labels": {}\n        }\n    ]\n}\n')),(0,r.kt)("p",null,"The search is run against ALL fields of the records. It can be further restricted by specifying a filter criteria, could be exact match with ",(0,r.kt)("inlineCode",{parentName:"p"},"filter")," and fuzzy match with ",(0,r.kt)("inlineCode",{parentName:"p"},"query"),". For instance, if you wish to restrict the search to piccolo deployments that belong to ",(0,r.kt)("inlineCode",{parentName:"p"},"kami")," (fuzzy), you can run:"),(0,r.kt)("h4",{id:"we-can-search-with-custom-queries-in-the-following-ways"},"We can search with custom queries in the following ways:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Using ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"compass search <text> --query=field_key1:val1"))," CLI command"),(0,r.kt)("li",{parentName:"ol"},"Calling to ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"GET /v1beta1/search"))," API with ",(0,r.kt)("inlineCode",{parentName:"li"},"text")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"query[field_key1]=val1")," as query parameters ")),(0,r.kt)(l.Z,{groupId:"cli",mdxType:"Tabs"},(0,r.kt)(s.Z,{value:"CLI",label:"CLI",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ compass search one --query=owners:kami\n"))),(0,r.kt)(s.Z,{value:"HTTP",label:"HTTP",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ curl 'http://localhost:8080/v1beta1/search?text=one&query[owners]=kami' \\\n--header 'Compass-User-UUID:odpf@email.com' | jq\n")))),(0,r.kt)("p",null,"The output is the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "data": [\n        {\n            "urn": "picollo:deployment-03",\n            "type": "table",\n            "name": "deployment-03",\n            "service": "picollo",\n            "description": "the last one",\n            "data": {},\n            "owners": [\n                {\n                    "email": "kami@email.com"\n                }\n            ],\n            "labels": {}\n        }\n    ]\n}\n')),(0,r.kt)("h2",{id:"lineage"},"Lineage"),(0,r.kt)("p",null,"Now that we have configured the ",(0,r.kt)("inlineCode",{parentName:"p"},"piccolo")," type and learnt how to use the search API to search it's assets, let's configure lineage for it."),(0,r.kt)("p",null,"To begin with, let's start over adding picolo metadata with its lineage information and add another metadata with service name ",(0,r.kt)("inlineCode",{parentName:"p"},"sensu")," and type ",(0,r.kt)("inlineCode",{parentName:"p"},"topic")," and add some records for it."),(0,r.kt)("h3",{id:"adding-picollo-metadata"},"Adding ",(0,r.kt)("inlineCode",{parentName:"h3"},"picollo")," Metadata"),(0,r.kt)(l.Z,{mdxType:"Tabs"},(0,r.kt)(s.Z,{value:"picollo 1",label:"Picollo 1",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl --request PATCH \'http://localhost:8080/v1beta1/assets\' \\\n--header \'Compass-User-UUID:odpf@email.com\' \\\n--data-raw \'{\n    "asset": {\n        "urn": "picollo:deployment-01",\n        "type": "table",\n        "name": "deployment-01",\n        "service": "picollo",\n        "description": "this is the one",\n        "data": {},\n        "owners": [\n            {\n                "email": "john.doe@email.com"\n            }\n        ]\n    },\n    "upstreams": [\n        {\n            "urn": "sensu:deployment-01",\n            "type": "topic",\n            "service": "sensu"\n        }\n    ],\n    "downstreams": [\n        {\n            "urn": "gohan:deployment-01",\n            "type": "table",\n            "service": "gohan"\n        }\n    ]\n}\'\n'))),(0,r.kt)(s.Z,{value:"picollo 2",label:"Picollo 2",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl --request PATCH \'http://localhost:8080/v1beta1/assets\' \\\n--header \'Compass-User-UUID:odpf@email.com\' \\\n--data-raw \'{\n    "asset": {\n        "urn": "picollo:deployment-02",\n        "type": "table",\n        "name": "deployment-02",\n        "service": "picollo",\n        "description": "this came second",\n        "data": {},\n        "owners": [\n            {\n                "email": "kami@email.com"\n            }\n        ]\n    },\n    "upstreams": [\n        {\n            "urn": "sensu:deployment-02",\n            "type": "topic",\n            "service": "sensu"\n        }\n    ],\n    "downstreams": [\n        {\n            "urn": "gohan:deployment-02",\n            "type": "table",\n            "service": "gohan"\n        }\n    ]\n}\'\n'))),(0,r.kt)(s.Z,{value:"picollo 3",label:"Picollo 3",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl --request PATCH \'http://localhost:8080/v1beta1/assets\' \\\n--header \'Compass-User-UUID:odpf@email.com\' \\\n--data-raw \'{\n    "asset": {\n        "urn": "picollo:deployment-03",\n        "type": "table",\n        "name": "deployment-03",\n        "service": "picollo",\n        "description": "the last one",\n        "data": {},\n        "owners": [\n            {\n                "email": "kami@email.com"\n            }\n        ]\n    },\n    "upstreams": [\n        {\n            "urn": "sensu:deployment-03",\n            "type": "topic",\n            "service": "sensu"\n        }\n    ],\n    "downstreams": [\n        {\n            "urn": "gohan:deployment-03",\n            "type": "table",\n            "service": "gohan"\n        }\n    ]\n}\'\n')))),(0,r.kt)("h3",{id:"adding-sensu-metadata"},"Adding ",(0,r.kt)("inlineCode",{parentName:"h3"},"sensu")," Metadata"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"sensu")," is the data store that ",(0,r.kt)("inlineCode",{parentName:"p"},"piccolo")," instances read from. In order to have a lineage, we need to have the metadata urn of ",(0,r.kt)("inlineCode",{parentName:"p"},"sensu")," in Compass."),(0,r.kt)("p",null,"For instance, if you look at the ",(0,r.kt)("inlineCode",{parentName:"p"},"upstreams")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"downstreams")," fields when we are ingesting ",(0,r.kt)("inlineCode",{parentName:"p"},"piccolo")," metadata, you'll see that they are urn's of ",(0,r.kt)("inlineCode",{parentName:"p"},"sensu")," instances. This means we can define the relationship between ",(0,r.kt)("inlineCode",{parentName:"p"},"piccolo")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"sensu")," resources by declaring this relationship in ",(0,r.kt)("inlineCode",{parentName:"p"},"piccolo"),"'s definition."),(0,r.kt)(l.Z,{mdxType:"Tabs"},(0,r.kt)(s.Z,{value:"sensu 1",label:"Sensu 1",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl --request PATCH \'http://localhost:8080/v1beta1/assets\' \\\n--header \'Compass-User-UUID:odpf@email.com\' \\\n--data-raw \'{\n    "asset": {\n        "urn": "sensu:deployment-01",\n        "type": "topic",\n        "name": "deployment-01",\n        "service": "sensu",\n        "description": "primary sensu dataset",\n        "data": {}\n    },\n    "upstreams": [],\n    "downstreams": []\n}\'\n'))),(0,r.kt)(s.Z,{value:"sensu 2",label:"Sensu 2",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl --request PATCH \'http://localhost:8080/v1beta1/assets\' \\\n--header \'Compass-User-UUID:odpf@email.com\' \\\n--data-raw \'{\n    "asset": {\n        "urn": "sensu:deployment-02",\n        "type": "topic",\n        "name": "deployment-02",\n        "service": "sensu",\n        "description": "secondary sensu dataset",\n        "data": {}\n    },\n    "upstreams": [],\n    "downstreams": []\n}\'\n'))),(0,r.kt)(s.Z,{value:"sensu 3",label:"Sensu 3",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl --request PATCH \'http://localhost:8080/v1beta1/assets\' \\\n--header \'Compass-User-UUID:odpf@email.com\' \\\n--data-raw \'{\n    "asset": {\n        "urn": "sensu:deployment-03",\n        "type": "topic",\n        "name": "deployment-03",\n        "service": "sensu",\n        "description": "tertiary sensu dataset",\n        "data": {}\n    },\n    "upstreams": [],\n    "downstreams": []\n}\'\n')))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note:")," it is sufficient ","(","and preferred",")"," that one declare it's relationship to another. Both need not do this."),(0,r.kt)("h3",{id:"querying-lineage"},"Querying Lineage"),(0,r.kt)("h4",{id:"we-can-search-for-lineage-in-the-following-ways"},"We can search for lineage in the following ways:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Using ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"compass lineage <urn>"))," CLI command"),(0,r.kt)("li",{parentName:"ol"},"Calling to ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"GET /v1beta1/lineage/:urn"))," API with ",(0,r.kt)("inlineCode",{parentName:"li"},"urn")," to be searched as the path parameter")),(0,r.kt)(l.Z,{groupId:"cli",mdxType:"Tabs"},(0,r.kt)(s.Z,{value:"CLI",label:"CLI",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ compass lineage picollo:deployment-01\n"))),(0,r.kt)(s.Z,{value:"HTTP",label:"HTTP",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"curl 'http://localhost:8080/v1beta1/lineage/picollo%3Adeployment-01' \\\n--header 'Compass-User-UUID:odpf@email.com'\n")))),(0,r.kt)("p",null,"The output is the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "data": [\n        {\n            "source": "sensu:deployment-01",\n            "target": "picollo:deployment-01",\n            "prop": {\n                "root": "picollo:deployment-01"\n            }\n        },\n        {\n            "source": "picollo:deployment-01",\n            "target": "gohan:deployment-01",\n            "prop": {\n                "root": "picollo:deployment-01"\n            }\n        }\n    ],\n    "node_attrs": {}\n}\n')),(0,r.kt)("p",null,"The response represents a graph that consists of edges in its graph."))}g.isMDXComponent=!0}}]);